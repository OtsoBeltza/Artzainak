<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Louer des brebis - Artzainak</title>
    
    <!-- Métadonnées SEO -->
    <meta name="description" content="Service d'écopâturage au Pays Basque. Location de brebis pour entretien écologique de vos terrains. Devis personnalisé et service clé en main.">
    
    <!-- Balises Open Graph pour les réseaux sociaux -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Écopâturage par location de brebis - Artzainak">
    <meta property="og:description" content="Entretenez vos espaces verts de façon naturelle et écologique avec nos brebis. Service d'écopâturage professionnel au Pays Basque.">
    <meta property="og:image" content="https://artzainak.netlify.app/images/og-image-ecopaturage.jpg">
    <meta property="og:url" content="https://artzainak.netlify.app/location.html">
    <meta property="og:site_name" content="Artzainak">
    
    <!-- Balises de langue et canonical -->
    <link rel="alternate" hreflang="fr" href="https://artzainak.netlify.app/location.html">
    <link rel="canonical" href="https://artzainak.netlify.app/location.html">
    
    <!-- Google Tag Manager -->
    <script src="js/marketing-tracking.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#5D5CDE',
                            dark: '#4A49B0'
                        },
                        basque: {
                            red: '#DC3545',
                            green: '#198754'
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("gXAUQo9QLLKuoIzGC");
        })();
    </script>
    
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header -->
    <header class="bg-primary p-4 text-white sticky top-0 z-10 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-xl font-bold">ARTZAINAK</a>
            <p class="text-sm hidden sm:block">Éducation de chiens de troupeau au Pays Basque</p>
            <button id="menuToggle" class="md:hidden focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            <nav id="mainNav" class="hidden md:block">
                <ul class="flex space-x-4">
                    <li><a href="index.html" class="hover:underline">Accueil</a></li>
                    <li><a href="index.html#services" class="hover:underline">Services</a></li>
                    <li><a href="reservation.html" class="hover:underline">Réserver</a></li>
                    <li><a href="location.html" class="hover:underline font-bold">Louer</a></li>
                    <li><a href="ressources.html" class="hover:underline">Ressources</a></li>
                    <li><a href="contact.html" class="hover:underline">Contact</a></li>
                </ul>
            </nav>
        </div>
        <nav id="mobileNav" class="hidden bg-primary-dark py-2 px-4">
            <ul class="space-y-2">
                <li><a href="index.html" class="block hover:underline">Accueil</a></li>
                <li><a href="index.html#services" class="block hover:underline">Services</a></li>
                <li><a href="reservation.html" class="block hover:underline">Réserver</a></li>
                <li><a href="location.html" class="block hover:underline font-bold">Louer</a></li>
                <li><a href="ressources.html" class="block hover:underline">Ressources</a></li>
                <li><a href="contact.html" class="block hover:underline">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Page Title -->
    <div class="bg-basque-green/10 dark:bg-basque-green/20 py-6">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-center">Location de brebis pour écopâturage</h1>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-3xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
            <!-- Introduction -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold mb-4">Entretenez vos espaces verts naturellement</h2>
                <p class="mb-4">L'écopâturage est une solution écologique et économique pour l'entretien de vos terrains. Nos brebis débroussaillent efficacement tout en fertilisant naturellement votre sol.</p>
                
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">Avantages de l'écopâturage :</h3>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>Solution 100% écologique sans produits chimiques</li>
                        <li>Entretien régulier et fertilisation naturelle du sol</li>
                        <li>Préservation de la biodiversité locale</li>
                        <li>Débroussaillage efficace même sur terrains difficiles</li>
                        <li>Alternative économique aux méthodes mécaniques</li>
                    </ul>
                </div>
            </div>
            
            <!-- Photo Gallery -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">L'écopâturage en images</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- Exemple d'images - Remplacez par vos propres images -->
                    <div class="aspect-video rounded overflow-hidden">
                        <img src="images/sheep1.jpg" alt="Brebis en écopâturage" class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-video rounded overflow-hidden">
                        <img src="images/sheep2.jpg" alt="Tonte naturelle" class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-video rounded overflow-hidden">
                        <img src="images/sheep3.jpg" alt="Entretien écologique" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
            
            <!-- Calculateur amélioré -->
            <div class="mb-8 p-4 bg-basque-green/5 dark:bg-basque-green/10 rounded-lg">
                <h3 class="font-semibold mb-3">Calculateur d'écopâturage avancé :</h3>
                <p class="mb-4 text-sm">Estimez le nombre de brebis nécessaires et le coût pour votre terrain :</p>
                
                <div class="space-y-4">
                    <div>
                        <label for="landSize" class="block mb-1 font-medium text-sm">Surface de votre terrain (m²)</label>
                        <input type="number" id="landSize" min="1000" value="1000" 
                            class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <p id="sizeError" class="text-basque-red text-xs mt-1 hidden">La surface minimum est de 1000m²</p>
                    </div>
                    
                    <div>
                        <label for="address" class="block mb-1 font-medium text-sm">Adresse du terrain</label>
                        <input type="text" id="address" placeholder="Ex: 10 rue des Fleurs, 64200 Biarritz"
                            class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <p id="distanceMessage" class="text-xs mt-1 italic">Nous calculerons automatiquement la distance depuis Arbonne.</p>
                    </div>
                    
                    <div>
                        <label for="terrain" class="block mb-1 font-medium text-sm">Type de terrain</label>
                        <select id="terrain" class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                            <option value="friche">Friche/Forêt (Valeur fourragère basse)</option>
                            <option value="normal" selected>Pelouse/Jardin (Valeur fourragère moyenne)</option>
                            <option value="prairie">Prairie (Valeur fourragère élevée)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="eco-duration" class="block mb-1 font-medium text-sm">Durée de location</label>
                        <select id="eco-duration" class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                            <option value="week" selected>Hebdomadaire</option>
                            <option value="month">Mensuelle</option>
                            <option value="season">Saison complète</option>
                        </select>
                    </div>
                    
                    <button id="calculateBtn" class="bg-basque-green hover:bg-basque-green/80 text-white font-medium py-2 px-4 rounded transition duration-300 text-sm">
                        Calculer
                    </button>
                </div>
                
                <div id="calculationResult" class="hidden mt-4 p-4 bg-gray-100 dark:bg-gray-600 rounded-lg text-sm">
                    <div id="loadingDistance" class="mb-2 text-xs flex items-center">
                        <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-basque-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Calcul de la distance en cours...
                    </div>
                    <p class="mb-1">Surface à entretenir: <span id="areaSummary" class="font-medium">0</span> m²</p>
                    <p class="mb-1">Type de terrain: <span id="terrainTypeSummary" class="font-medium">Pelouse/Jardin</span></p>
                    <p class="mb-1">Nombre de brebis recommandé: <span id="sheepCount" class="font-medium">0</span></p>
                    <p class="mb-1">Temps estimé pour une tonte complète: <span id="estimatedDays" class="font-medium">0</span> jours</p>
                    <p class="mb-1">Distance depuis Arbonne: <span id="distanceSummary" class="font-medium">0</span> km</p>
                    <p id="distanceWarning" class="text-xs text-yellow-600 dark:text-yellow-400 mt-1 hidden">Distance non déterminée. Le prix peut varier en fonction de la localisation exacte.</p>
                    <p class="mb-1">Durée de location: <span id="durationSummary" class="font-medium">Hebdomadaire</span></p>
                    <p class="font-bold mt-2 text-base">Estimation du tarif: <span id="totalPrice">0</span> € / semaine</p>
                    <p id="weeklyEquivalent" class="text-xs text-gray-500 dark:text-gray-400 mt-1 hidden"></p>
                    <p class="mt-1 text-xs italic">Forfait hebdomadaire incluant livraison, installation et suivi des animaux</p>
                    
                    <!-- Impact écologique -->
                    <div id="eco-impact" class="mt-4 p-3 bg-basque-green/10 rounded-lg text-sm hidden">
                        <h4 class="font-semibold mb-2">Impact écologique estimé :</h4>
                        <div class="space-y-1">
                            <p class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-basque-green mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Économie de ~<span id="co2Savings">0</span> kg de CO2 vs. tonte mécanique</span>
                            </p>
                            <p class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-basque-green mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Économie de ~<span id="waterSavings">0</span> litres d'eau</span>
                            </p>
                            <p class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-basque-green mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Favorise la biodiversité locale</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Bouton de réservation après calcul -->
                <div id="booking-btn-container" class="mt-4 hidden">
                    <a href="#calendar-section" class="block text-center bg-basque-green hover:bg-basque-green/80 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                        Réserver pour une semaine
                    </a>
                </div>
            </div>
            
            <!-- Section calendrier pour réservation hebdomadaire -->
            <div id="calendar-section" class="mb-8 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg shadow-lg hidden">
                <h3 class="text-xl font-semibold mb-4 text-center">Réserver des brebis à la semaine</h3>
                <p class="mb-6 text-center">Sélectionnez une date de début pour votre location hebdomadaire :</p>
                
                <div class="cal-iframe-container">
                    <div id="loading-calendar" class="iframe-loading">
                        <div class="loading-spinner mb-4"></div>
                        <p>Chargement du calendrier...</p>
                    </div>
                    <iframe 
                        id="cal-iframe-ecopaturage"
                        src="https://cal.com/artzainak/ecopaturage-semaine?embed=true&theme=dark&lang=fr" 
                        width="100%" 
                        height="600" 
                        frameborder="0"
                        allow="camera; microphone; autoplay; fullscreen"
                        onload="hideLoading('loading-calendar')">
                    </iframe>
                </div>
            </div>
            
            <!-- Rental Form -->
            <form id="rentalForm" class="space-y-6">
                <h3 class="text-lg font-semibold">Formulaire de demande d'écopâturage</h3>
                
                <!-- Personal Information -->
                <div class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="firstName" class="block mb-1 font-medium">Prénom</label>
                            <input type="text" id="firstName" name="firstName" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label for="lastName" class="block mb-1 font-medium">Nom</label>
                            <input type="text" id="lastName" name="lastName" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="email" class="block mb-1 font-medium">Email</label>
                            <input type="email" id="email" name="email" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label for="phone" class="block mb-1 font-medium">Téléphone</label>
                            <input type="tel" id="phone" name="phone" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                    </div>
                </div>
                
                <!-- Land Information -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="font-medium mb-4">Informations sur votre terrain</h4>
                    
                    <div class="mb-4">
                        <label for="landAddress" class="block mb-1 font-medium">Adresse du terrain</label>
                        <textarea id="landAddress" name="landAddress" rows="2" required
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="landSizeForm" class="block mb-1 font-medium">Surface approximative (m²)</label>
                            <input type="number" id="landSizeForm" name="landSizeForm" min="1000" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label for="landType" class="block mb-1 font-medium">Type de terrain</label>
                            <select id="landType" name="landType" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                <option value="">Sélectionnez un type</option>
                                <option value="friche">Friche/Forêt</option>
                                <option value="jardin">Pelouse/Jardin</option>
                                <option value="prairie">Prairie</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label for="landDescription" class="block mb-1 font-medium">Description du terrain</label>
                        <textarea id="landDescription" name="landDescription" rows="3" placeholder="Végétation, accès, particularités..."
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
                    </div>
                </div>
                
                <!-- Service Details -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="font-medium mb-4">Détails du service</h4>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="startDate" class="block mb-1 font-medium">Date de début souhaitée</label>
                            <input type="date" id="startDate" name="startDate" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label for="duration" class="block mb-1 font-medium">Durée souhaitée</label>
                            <select id="duration" name="duration" required
                                class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                <option value="">Sélectionnez une durée</option>
                                <option value="1week">1 semaine</option>
                                <option value="2weeks">2 semaines</option>
                                <option value="1month">1 mois</option>
                                <option value="season">Saison complète</option>
                                <option value="custom">Autre (préciser)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="customDurationContainer" class="hidden mb-4">
                        <label for="customDuration" class="block mb-1 font-medium">Précisez la durée souhaitée</label>
                        <input type="text" id="customDuration" name="customDuration" placeholder="Ex: 3 semaines, 2 mois..."
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    </div>
                </div>
                
                <!-- Land Photos -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="font-medium mb-4">Photos du terrain (optionnel)</h4>
                    
                    <div class="mb-4">
                        <label for="landPhotos" class="block mb-1 font-medium">Téléchargez des photos</label>
                        <input type="file" id="landPhotos" name="landPhotos" accept="image/*" multiple
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <p class="text-xs mt-1 text-gray-500 dark:text-gray-400">Format JPG ou PNG, max 5 MB par photo, jusqu'à 3 photos</p>
                    </div>
                    
                    <div id="photosPreviewContainer" class="hidden mb-4">
                        <p class="mb-2 font-medium">Aperçu :</p>
                        <div class="flex flex-wrap gap-4" id="photosPreview">
                            <!-- Photos preview will be inserted here -->
                        </div>
                    </div>
                </div>
                
                <!-- Additional Information -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <h4 class="font-medium mb-4">Informations complémentaires</h4>
                    
                    <div class="mb-4">
                        <label for="additionalInfo" class="block mb-1 font-medium">Questions ou précisions</label>
                        <textarea id="additionalInfo" name="additionalInfo" rows="3" placeholder="Toute information utile pour votre demande..."
                            class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
                    </div>
                </div>
                
                <!-- Submit Button -->
                <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                    <button type="submit" id="submitButton" class="w-full bg-basque-green hover:bg-basque-green/80 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                        </svg>
                        Envoyer ma demande d'écopâturage
                    </button>
                </div>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="py-6 px-4 bg-gray-800 text-white">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold">ARTZAINAK</h2>
                    <p class="text-sm">Éducation de chiens de troupeau au Pays Basque</p>
                </div>
                
                <div class="text-sm text-center md:text-right">
                    <div class="flex gap-4 justify-center md:justify-end mb-2">
                        <a href="reservation.html" class="text-white hover:text-primary transition duration-300">Réserver un cours</a>
                        <a href="location.html" class="text-white hover:text-basque-green transition duration-300">Louer des brebis</a>
                        <a href="ressources.html" class="text-white hover:text-primary transition duration-300">Ressources</a>
                        <a href="contact.html" class="text-white hover:text-gray-300 transition duration-300">Contact</a>
                    </div>
                    <p>&copy; 2023 Artzainak. Tous droits réservés.</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Notification de succès -->
    <div id="successNotification" class="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md mx-4 shadow-xl">
            <div class="flex items-center justify-center text-basque-green mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Demande envoyée avec succès !</h3>
            <p class="text-center mb-4">Nous vous contacterons rapidement pour discuter des détails et établir un devis personnalisé.</p>
            <button id="closeNotification" class="w-full bg-basque-green hover:bg-basque-green/80 text-white font-medium py-2 px-4 rounded transition duration-300">
                Fermer
            </button>
        </div>
    </div>

    <!-- Script Cal.com -->
    <script src="https://app.cal.com/embed/embed.js"></script>
    
    <!-- Scripts personnalisés -->
    <script src="js/script.js"></script>
    <script src="js/email-notifications.js"></script>
    <script src="js/mobile-optimizations.js"></script>
    <script src="js/performance-optimizations.js"></script>
    <script src="js/floating-cta.js"></script>
    
    <script>
    // Calculateur d'écopâturage amélioré
    document.addEventListener('DOMContentLoaded', function() {
        // Fonction pour calculer la distance
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Rayon de la Terre en km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            const distance = R * c; // Distance en km
            return Math.round(distance);
        }

        // Fonction pour calculer l'écopâturage
        function calculateEcoPasture() {
            // Récupération des valeurs du formulaire
            const landSize = parseFloat(document.getElementById('landSize').value);
            const terrain = document.getElementById('terrain').value;
            const address = document.getElementById('address').value;
            const duration = document.getElementById('eco-duration').value;
            
            // Validation de la taille du terrain
            if (landSize < 1000) {
                document.getElementById('sizeError').classList.remove('hidden');
                return;
            } else {
                document.getElementById('sizeError').classList.add('hidden');
            }
            
            // Affichage des résultats initiaux
            document.getElementById('calculationResult').classList.remove('hidden');
            document.getElementById('loadingDistance').classList.remove('hidden');
            document.getElementById('areaSummary').textContent = landSize.toLocaleString('fr-FR');
            
            // Calcul du nombre de brebis en fonction du type de terrain
            let sheepPerHectare;
            let terrainTypeName;
            let terrainEfficiency;
            
            switch(terrain) {
                case 'prairie':
                    sheepPerHectare = 15;
                    terrainTypeName = "Prairie (valeur fourragère élevée)";
                    terrainEfficiency = 1.2;
                    break;
                case 'friche':
                    sheepPerHectare = 5;
                    terrainTypeName = "Friche/Forêt (valeur fourragère basse)";
                    terrainEfficiency = 0.6;
                    break;
                default: // normal (pelouse/jardin)
                    sheepPerHectare = 10;
                    terrainTypeName = "Pelouse/Jardin (valeur fourragère moyenne)";
                    terrainEfficiency = 1.0;
            }
            
            document.getElementById('terrainTypeSummary').textContent = terrainTypeName;
            
            // Calcul du nombre de brebis (conversion m² en hectares)
            const hectares = landSize / 10000;
            const sheepCount = Math.max(5, Math.round(hectares * sheepPerHectare));
            document.getElementById('sheepCount').textContent = sheepCount;
            
            // Estimation du temps nécessaire pour une tonte complète
            const estimatedDays = Math.ceil((landSize / 100) / (sheepCount * terrainEfficiency));
            document.getElementById('estimatedDays').textContent = estimatedDays;
            
            // Géocodage et calcul de distance
            if (address) {
                // Simuler un géocodage (remplacer par une API réelle)
                setTimeout(() => {
                    const distance = Math.floor(Math.random() * 30) + 5; // Distance simulée entre 5 et 35 km
                    document.getElementById('distanceSummary').textContent = distance;
                    
                    // Calcul du prix basé sur nombre de brebis, distance et durée
                    const basePricePerSheep = 15; // Prix de base par brebis par semaine
                    const distanceFee = Math.max(0, (distance - 20) * 2); // Frais de distance au-delà de 20km
                    
                    let durationMultiplier = 1;
                    if (duration === 'month') {
                        durationMultiplier = 3.5; // Réduction pour location mensuelle
                        document.getElementById('durationSummary').textContent = 'Mensuelle';
                    } else if (duration === 'season') {
                        durationMultiplier = 12; // Réduction importante pour saison
                        document.getElementById('durationSummary').textContent = 'Saisonnière (3-4 mois)';
                    } else {
                        document.getElementById('durationSummary').textContent = 'Hebdomadaire';
                    }
                    
                    // Calcul des prix selon durée
                    const weeklyPrice = (sheepCount * basePricePerSheep) + distanceFee;
                    const totalPrice = Math.round(weeklyPrice * durationMultiplier);
                    
                    // Affichage du prix selon durée
                    if (duration === 'week') {
                        document.getElementById('totalPrice').textContent = `${weeklyPrice.toLocaleString('fr-FR')} €/semaine`;
                    } else if (duration === 'month') {
                        document.getElementById('totalPrice').textContent = `${totalPrice.toLocaleString('fr-FR')} €/mois`;
                        document.getElementById('weeklyEquivalent').textContent = `(équivalent à ${Math.round(totalPrice/4).toLocaleString('fr-FR')} €/semaine)`;
                        document.getElementById('weeklyEquivalent').classList.remove('hidden');
                    } else if (duration === 'season') {
                        document.getElementById('totalPrice').textContent = `${totalPrice.toLocaleString('fr-FR')} € pour la saison`;
                        document.getElementById('weeklyEquivalent').textContent = `(équivalent à ${Math.round(totalPrice/16).toLocaleString('fr-FR')} €/semaine)`;
                        document.getElementById('weeklyEquivalent').classList.remove('hidden');
                    }
                    
                    // Calculer impact écologique
                    document.getElementById('eco-impact').classList.remove('hidden');
                    
                    // Calculer les économies CO2 approximatives par rapport à une tondeuse
                    const co2SavingsPerHectare = 25; // kg de CO2 économisés par hectare
                    const co2Savings = Math.round(hectares * co2SavingsPerHectare);
                    document.getElementById('co2Savings').textContent = co2Savings;
                    
                    // Calculer économie d'eau
                    const waterSavingsPerHectare = 2000; // litres d'eau économisés par hectare
                    const waterSavings = Math.round(hectares * waterSavingsPerHectare);
                    document.getElementById('waterSavings').textContent = waterSavings;
                    
                    // Afficher bouton de réservation
                    document.getElementById('booking-btn-container').classList.remove('hidden');
                    document.getElementById('calendar-section').classList.remove('hidden');
                    
                    document.getElementById('loadingDistance').classList.add('hidden');
                }, 1500);
            } else {
                // Gestion sans adresse
                document.getElementById('distanceSummary').textContent = "Non déterminée";
                document.getElementById('distanceWarning').classList.remove('hidden');
                
                // Prix approximatif sans distance
                const approximatePrice = sheepCount * 15;
                document.getElementById('totalPrice').textContent = `~${approximatePrice.toLocaleString('fr-FR')} € (estimation)`;
                
                // Afficher bouton de réservation quand même
                document.getElementById('booking-btn-container').classList.remove('hidden');
                document.getElementById('calendar-section').classList.remove('hidden');
                
                document.getElementById('loadingDistance').classList.add('hidden');
            }
        }

        // Attacher l'événement au bouton
        const calculateBtn = document.getElementById('calculateBtn');
        if (calculateBtn) {
            calculateBtn.addEventListener('click', calculateEcoPasture);
        }
        
        // Masquer le loader du calendrier
        function hideLoading(loaderId) {
            const loader = document.getElementById(loaderId);
            if (loader) {
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 300);
            }
        }
        
        // Configuration Cal.com
        if (typeof Cal !== 'undefined') {
            Cal('inline', {
                elementOrSelector: '#cal-iframe-ecopaturage',
                calLink: 'artzainak/ecopaturage-semaine',
                config: {
                    theme: 'dark',
                    locale: 'fr'
                }
            });
        }
        
        // Gestion du formulaire de location
        document.getElementById('rentalForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Récupération des données du formulaire
            const formData = new FormData(this);
            
            try {
                // Afficher un indicateur de chargement sur le bouton
                const submitButton = document.getElementById('submitButton');
                const originalButtonText = submitButton.innerHTML;
                submitButton.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Envoi en cours...';
                submitButton.disabled = true;
                
                // Préparer les données du formulaire pour EmailJS
                const templateParams = {
                    to_email: 'takalowshin@gmail.com',
                    from_name: `${formData.get('firstName')} ${formData.get('lastName')}`,
                    user_email: formData.get('email'),
                    user_phone: formData.get('phone'),
                    land_address: formData.get('landAddress'),
                    land_size: formData.get('landSizeForm'),
                    land_type: formData.get('landType'),
                    start_date: formData.get('startDate'),
                    duration: formData.get('duration'),
                    message: formData.get('additionalInfo') || 'Pas de message additionnel'
                };
                
                // Envoyer via EmailJS
                const response = await emailjs.send('service_ucp821f', 'template_mfsiq3i', templateParams);
                
                // Afficher la notification de succès
                document.getElementById('successNotification').classList.remove('hidden');
                
                // Réinitialiser le formulaire
                document.getElementById('rentalForm').reset();
                
            } catch (error) {
                console.error('Erreur:', error);
                alert('Une erreur est survenue lors de l\'envoi du formulaire. Veuillez réessayer plus tard.');
            } finally {
                // Restaurer le bouton
                submitButton.innerHTML = originalButtonText;
                submitButton.disabled = false;
            }
        });
        
        // Gestion de la durée personnalisée
        document.getElementById('duration').addEventListener('change', function() {
            const customDurationContainer = document.getElementById('customDurationContainer');
            if (this.value === 'custom') {
                customDurationContainer.classList.remove('hidden');
                document.getElementById('customDuration').required = true;
            } else {
                customDurationContainer.classList.add('hidden');
                document.getElementById('customDuration').required = false;
            }
        });
        
        // Fermer la notification de succès
        document.getElementById('closeNotification')?.addEventListener('click', function() {
            document.getElementById('successNotification').classList.add('hidden');
        });
        
        // Initialiser la date minimum à aujourd'hui
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        const todayFormatted = `${yyyy}-${mm}-${dd}`;
        document.getElementById('startDate').min = todayFormatted;
    });
    </script>
    <script>
        /**
 * Script de débogage et correction pour EmailJS
 * Placez ce script juste avant la fermeture de la balise body dans reservation.html et location.html
 */

// Fonction pour vérifier la configuration d'EmailJS
function checkEmailJSConfig() {
  console.log("Vérification de la configuration EmailJS...");
  
  // Vérifier si EmailJS est chargé
  if (typeof emailjs === 'undefined') {
    console.error("❌ EmailJS n'est pas chargé correctement!");
    return false;
  }
  
  console.log("✅ EmailJS est correctement chargé");
  
  // Vérifier l'initialisation
  try {
    // Réinitialiser pour s'assurer que la clé publique est correcte
    emailjs.init("gXAUQo9QLLKuoIzGC");
    console.log("✅ EmailJS a été initialisé avec succès");
    return true;
  } catch (error) {
    console.error("❌ Erreur lors de l'initialisation d'EmailJS:", error);
    return false;
  }
}

// Fonction pour corriger les formulaires
function fixEmailJSForms() {
  console.log("Correction des formulaires EmailJS...");
  
  // Formulaire de réservation sur reservation.html
  const bookingForm = document.getElementById('bookingForm');
  if (bookingForm) {
    console.log("Formulaire de réservation trouvé, mise en place du gestionnaire...");
    
    // Supprimer tous les écouteurs d'événements existants
    const newForm = bookingForm.cloneNode(true);
    bookingForm.parentNode.replaceChild(newForm, bookingForm);
    
    // Ajouter un nouvel écouteur d'événements avec debug logs
    newForm.addEventListener('submit', function(e) {
      e.preventDefault();
      console.log("Formulaire de réservation soumis!");
      
      // Obtenir les données du formulaire
      const formData = new FormData(this);
      const templateParams = {};
      
      // Convertir FormData en objet
      for (const [key, value] of formData.entries()) {
        templateParams[key] = value;
        console.log(`Champ formulaire: ${key} = ${value}`);
      }
      
      // Ajouter des données supplémentaires
      templateParams.to_email = 'takalowshin@gmail.com'; // Remplacez par votre email
      templateParams.from_name = templateParams.owner_name || 'Client Artzainak';
      templateParams.user_email = templateParams.owner_email || '';
      
      console.log("Envoi des données à EmailJS...");
      console.log("Service ID:", 'service_ucp821f');
      console.log("Template ID:", 'template_mfsiq3i');
      
      // Afficher un indicateur de chargement
      const submitButton = document.querySelector('#bookingForm button[type="submit"]') || 
                          document.getElementById('submitButton') ||
                          document.getElementById('submitFormBtn');
                          
      if (submitButton) {
        const originalText = submitButton.innerHTML;
        submitButton.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Envoi en cours...';
        submitButton.disabled = true;
      }
      
      // Envoyer via EmailJS avec gestion explicite des erreurs
      emailjs.send('service_ucp821f', 'template_mfsiq3i', templateParams)
        .then(function(response) {
          console.log('✅ Succès!', response.status, response.text);
          
          // Afficher un message de succès
          const confirmationElement = document.getElementById('formConfirmation');
          if (confirmationElement) {
            // Cacher le formulaire
            newForm.style.display = 'none';
            // Montrer la confirmation
            confirmationElement.classList.remove('hidden');
          } else {
            alert('Votre réservation a été envoyée avec succès!');
          }
          
          // Enregistrer dans localStorage pour référence
          localStorage.setItem('lastSuccessfulSubmission', JSON.stringify({
            timestamp: new Date().toISOString(),
            data: templateParams
          }));
        })
        .catch(function(error) {
          console.error('❌ Erreur EmailJS:', error);
          
          // Tenter une méthode alternative - mailto
          try {
            const mailtoURL = `mailto:takalowshin@gmail.com?subject=${encodeURIComponent('Nouvelle réservation')}&body=${encodeURIComponent(JSON.stringify(templateParams, null, 2))}`;
            window.open(mailtoURL);
            alert('Le formulaire n\'a pas pu être envoyé automatiquement. Un email a été préparé pour vous.');
          } catch (mailtoError) {
            console.error('Erreur avec mailto:', mailtoError);
            alert('Le formulaire n\'a pas pu être envoyé. Veuillez nous contacter directement à takalowshin@gmail.com');
          }
        })
        .finally(function() {
          // Restaurer le bouton
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.innerHTML = 'Confirmer ma réservation';
          }
        });
    });
    
    console.log("✅ Gestionnaire d'événements mis en place pour le formulaire de réservation");
  }
  
  // Formulaire de location sur location.html
  const rentalForm = document.getElementById('rentalForm');
  if (rentalForm) {
    console.log("Formulaire de location trouvé, mise en place du gestionnaire...");
    
    // Supprimer tous les écouteurs d'événements existants
    const newRentalForm = rentalForm.cloneNode(true);
    rentalForm.parentNode.replaceChild(newRentalForm, rentalForm);
    
    // Ajouter un nouvel écouteur d'événements avec debug logs
    newRentalForm.addEventListener('submit', function(e) {
      e.preventDefault();
      console.log("Formulaire de location soumis!");
      
      // Obtenir les données du formulaire
      const formData = new FormData(this);
      const templateParams = {};
      
      // Convertir FormData en objet
      for (const [key, value] of formData.entries()) {
        templateParams[key] = value;
        console.log(`Champ formulaire: ${key} = ${value}`);
      }
      
      // Ajouter des données supplémentaires
      templateParams.to_email = 'takalowshin@gmail.com'; // Remplacez par votre email
      templateParams.from_name = `${formData.get('firstName')} ${formData.get('lastName')}` || 'Client Artzainak';
      templateParams.user_email = formData.get('email') || '';
      templateParams.user_phone = formData.get('phone') || '';
      
      console.log("Envoi des données à EmailJS...");
      console.log("Service ID:", 'service_ucp821f');
      console.log("Template ID:", 'template_mfsiq3i');
      
      // Afficher un indicateur de chargement
      const submitButton = document.querySelector('#rentalForm button[type="submit"]') ||
                           document.getElementById('submitButton');
                           
      if (submitButton) {
        const originalText = submitButton.innerHTML;
        submitButton.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Envoi en cours...';
        submitButton.disabled = true;
      }
      
      // Envoyer via EmailJS avec gestion explicite des erreurs
      emailjs.send('service_ucp821f', 'template_mfsiq3i', templateParams)
        .then(function(response) {
          console.log('✅ Succès!', response.status, response.text);
          
          // Afficher un message de succès
          const successNotification = document.getElementById('successNotification');
          if (successNotification) {
            successNotification.classList.remove('hidden');
          } else {
            alert('Votre demande a été envoyée avec succès!');
          }
          
          // Réinitialiser le formulaire
          newRentalForm.reset();
          
          // Enregistrer dans localStorage pour référence
          localStorage.setItem('lastSuccessfulSubmission', JSON.stringify({
            timestamp: new Date().toISOString(),
            data: templateParams
          }));
        })
        .catch(function(error) {
          console.error('❌ Erreur EmailJS:', error);
          
          // Tenter une méthode alternative - mailto
          try {
            const mailtoURL = `mailto:takalowshin@gmail.com?subject=${encodeURIComponent('Nouvelle demande de location')}&body=${encodeURIComponent(JSON.stringify(templateParams, null, 2))}`;
            window.open(mailtoURL);
            alert('Le formulaire n\'a pas pu être envoyé automatiquement. Un email a été préparé pour vous.');
          } catch (mailtoError) {
            console.error('Erreur avec mailto:', mailtoError);
            alert('Le formulaire n\'a pas pu être envoyé. Veuillez nous contacter directement à takalowshin@gmail.com');
          }
        })
        .finally(function() {
          // Restaurer le bouton
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.innerHTML = 'Envoyer ma demande d\'écopâturage';
          }
        });
    });
    
    console.log("✅ Gestionnaire d'événements mis en place pour le formulaire de location");
  }
  
  // Formulaire de contact sur contact.html
  const contactForm = document.getElementById('contactForm');
  if (contactForm) {
    console.log("Formulaire de contact trouvé, mise en place du gestionnaire...");
    
    // Supprimer tous les écouteurs d'événements existants
    const newContactForm = contactForm.cloneNode(true);
    contactForm.parentNode.replaceChild(newContactForm, contactForm);
    
    // Ajouter un nouvel écouteur d'événements avec debug logs
    newContactForm.addEventListener('submit', function(e) {
      e.preventDefault();
      console.log("Formulaire de contact soumis!");
      
      // Obtenir les données du formulaire
      const formData = new FormData(this);
      const templateParams = {};
      
      // Convertir FormData en objet
      for (const [key, value] of formData.entries()) {
        if (key !== 'attachment') { // Ignorer les pièces jointes qui ne sont pas supportées par EmailJS
          templateParams[key] = value;
          console.log(`Champ formulaire: ${key} = ${value}`);
        }
      }
      
      // Ajouter des données supplémentaires
      templateParams.to_email = 'takalowshin@gmail.com'; // Remplacez par votre email
      templateParams.from_name = templateParams.name || 'Visiteur Artzainak';
      templateParams.user_email = templateParams.email || '';
      
      console.log("Envoi des données à EmailJS...");
      console.log("Service ID:", 'service_ucp821f');
      console.log("Template ID:", 'template_mfsiq3i');
      
      // Afficher un indicateur de chargement
      const submitButton = document.querySelector('#contactForm button[type="submit"]') ||
                           document.getElementById('submitButton');
                           
      if (submitButton) {
        const originalText = submitButton.innerHTML;
        submitButton.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Envoi en cours...';
        submitButton.disabled = true;
      }
      
      // Envoyer via EmailJS avec gestion explicite des erreurs
      emailjs.send('service_ucp821f', 'template_mfsiq3i', templateParams)
        .then(function(response) {
          console.log('✅ Succès!', response.status, response.text);
          
          // Afficher un message de succès
          const successNotification = document.getElementById('successNotification');
          if (successNotification) {
            successNotification.classList.remove('hidden');
          } else {
            alert('Votre message a été envoyé avec succès!');
          }
          
          // Réinitialiser le formulaire
          newContactForm.reset();
          
          // Enregistrer dans localStorage pour référence
          localStorage.setItem('lastSuccessfulSubmission', JSON.stringify({
            timestamp: new Date().toISOString(),
            data: templateParams
          }));
        })
        .catch(function(error) {
          console.error('❌ Erreur EmailJS:', error);
          
          // Tenter une méthode alternative - mailto
          try {
            const mailtoURL = `mailto:takalowshin@gmail.com?subject=${encodeURIComponent(templateParams.subject || 'Message de contact')}&body=${encodeURIComponent(templateParams.message || '')}%0D%0A%0D%0ADe: ${encodeURIComponent(templateParams.name || '')}%0D%0AEmail: ${encodeURIComponent(templateParams.email || '')}`;
            window.open(mailtoURL);
            alert('Le formulaire n\'a pas pu être envoyé automatiquement. Un email a été préparé pour vous.');
          } catch (mailtoError) {
            console.error('Erreur avec mailto:', mailtoError);
            alert('Le formulaire n\'a pas pu être envoyé. Veuillez nous contacter directement à takalowshin@gmail.com');
          }
        })
        .finally(function() {
          // Restaurer le bouton
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.innerHTML = 'Envoyer le message';
          }
        });
    });
    
    console.log("✅ Gestionnaire d'événements mis en place pour le formulaire de contact");
  }
}

// Exécuter ces fonctions lors du chargement
document.addEventListener('DOMContentLoaded', function() {
  console.log("=======================================");
  console.log("DÉBOGAGE EMAILJS");
  console.log("=======================================");
  
  // Vérifier si nous sommes sur une page de formulaire
  const hasBookingForm = document.getElementById('bookingForm');
  const hasRentalForm = document.getElementById('rentalForm');
  const hasContactForm = document.getElementById('contactForm');
  
  if (hasBookingForm || hasRentalForm || hasContactForm) {
    console.log("Page avec formulaire détectée");
    
    // Vérifier et corriger la configuration d'EmailJS
    if (checkEmailJSConfig()) {
      // Fixer les formulaires
      fixEmailJSForms();
    } else {
      // Recharger EmailJS si nécessaire
      console.log("Tentative de rechargement d'EmailJS...");
      
      const script = document.createElement('script');
      script.src = "https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js";
      script.async = true;
      script.onload = function() {
        console.log("EmailJS rechargé, initialisation...");
        emailjs.init("gXAUQo9QLLKuoIzGC");
        fixEmailJSForms();
      };
      document.head.appendChild(script);
    }
  } else {
    console.log("Aucun formulaire détecté sur cette page");
  }
});

// Vérifier s'il y a eu des soumissions réussies précédentes
window.checkPreviousSubmissions = function() {
  const lastSubmission = localStorage.getItem('lastSuccessfulSubmission');
  if (lastSubmission) {
    const submissionData = JSON.parse(lastSubmission);
    console.log("Dernière soumission réussie:", submissionData);
    return submissionData;
  }
  console.log("Aucune soumission réussie précédente");
  return null;
};

console.log("Script de débogage EmailJS chargé avec succès");
    </script>
</body>
</html>
