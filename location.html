<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Louer des brebis - Artzainak</title>
    
    <!-- Métadonnées SEO -->
    <meta name="description" content="Service d'écopâturage au Pays Basque. Location de brebis pour entretien écologique de vos terrains. Devis personnalisé et service clé en main.">
    
    <!-- Balises Open Graph pour les réseaux sociaux -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Écopâturage par location de brebis - Artzainak">
    <meta property="og:description" content="Entretenez vos espaces verts de façon naturelle et écologique avec nos brebis. Service d'écopâturage professionnel au Pays Basque.">
    <meta property="og:image" content="https://artzainak.netlify.app/images/og-image-ecopaturage.jpg">
    <meta property="og:url" content="https://artzainak.netlify.app/location.html">
    <meta property="og:site_name" content="Artzainak">
    
    <!-- Balises de langue et canonical -->
    <link rel="alternate" hreflang="fr" href="https://artzainak.netlify.app/location.html">
    <link rel="canonical" href="https://artzainak.netlify.app/location.html">
    
    <!-- Google Tag Manager -->
    <script src="js/marketing-tracking.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#5D5CDE',
                            dark: '#4A49B0'
                        },
                        basque: {
                            red: '#DC3545',
                            green: '#198754'
                        }
                    }
                }
            }
        }
    </script>
    
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header -->
    <header class="bg-primary p-4 text-white sticky top-0 z-10 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-xl font-bold">ARTZAINAK</a>
            <p class="text-sm hidden sm:block">Éducation de chiens de troupeau au Pays Basque</p>
            <button id="menuToggle" class="md:hidden focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            <nav id="mainNav" class="hidden md:block">
                <ul class="flex space-x-4">
                    <li><a href="index.html" class="hover:underline">Accueil</a></li>
                    <li><a href="index.html#services" class="hover:underline">Services</a></li>
                    <li><a href="reservation.html" class="hover:underline">Réserver</a></li>
                    <li><a href="location.html" class="hover:underline font-bold">Louer</a></li>
                    <li><a href="ressources.html" class="hover:underline">Ressources</a></li>
                    <li><a href="contact.html" class="hover:underline">Contact</a></li>
                </ul>
            </nav>
        </div>
        <nav id="mobileNav" class="hidden bg-primary-dark py-2 px-4">
            <ul class="space-y-2">
                <li><a href="index.html" class="block hover:underline">Accueil</a></li>
                <li><a href="index.html#services" class="block hover:underline">Services</a></li>
                <li><a href="reservation.html" class="block hover:underline">Réserver</a></li>
                <li><a href="location.html" class="block hover:underline font-bold">Louer</a></li>
                <li><a href="ressources.html" class="block hover:underline">Ressources</a></li>
                <li><a href="contact.html" class="block hover:underline">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Page Title -->
    <div class="bg-basque-green/10 dark:bg-basque-green/20 py-6">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-center">Location de brebis pour écopâturage</h1>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-3xl mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
            <!-- Introduction -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold mb-4">Entretenez vos espaces verts naturellement</h2>
                <p class="mb-4">L'écopâturage est une solution écologique et économique pour l'entretien de vos terrains. Nos brebis débroussaillent efficacement tout en fertilisant naturellement votre sol.</p>
                
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">Avantages de l'écopâturage :</h3>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>Solution 100% écologique sans produits chimiques</li>
                        <li>Entretien régulier et fertilisation naturelle du sol</li>
                        <li>Préservation de la biodiversité locale</li>
                        <li>Débroussaillage efficace même sur terrains difficiles</li>
                        <li>Alternative économique aux méthodes mécaniques</li>
                    </ul>
                </div>
            </div>
            
            <!-- Photo Gallery -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">L'écopâturage en images</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- Exemple d'images - Remplacez par vos propres images -->
                    <div class="aspect-video rounded overflow-hidden">
                        <img src="images/sheep1.jpg" alt="Brebis en écopâturage" class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-video rounded overflow-hidden">
                        <img src="images/sheep2.jpg" alt="Tonte naturelle" class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-video rounded overflow-hidden">
                        <img src="images/sheep3.jpg" alt="Entretien écologique" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
            
            <!-- Calculateur amélioré -->
            <div class="mb-8 p-4 bg-basque-green/5 dark:bg-basque-green/10 rounded-lg">
                <h3 class="font-semibold mb-3">Calculateur d'écopâturage :</h3>
                <p class="mb-4 text-sm">Estimez le nombre de brebis nécessaires et le coût pour votre terrain :</p>
                
                <div class="space-y-4">
                    <div>
                        <label for="landSize" class="block mb-1 font-medium text-sm">Surface de votre terrain (m²)</label>
                        <input type="number" id="landSize" min="1000" value="1000" 
                            class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <p id="sizeError" class="text-basque-red text-xs mt-1 hidden">La surface minimum est de 1000m²</p>
                    </div>
                    
                    <div>
                        <label for="address" class="block mb-1 font-medium text-sm">Adresse du terrain</label>
                        <input type="text" id="address" placeholder="Ex: 10 rue des Fleurs, 64200 Biarritz"
                            class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <p id="distanceMessage" class="text-xs mt-1 italic">Nous calculerons automatiquement la distance depuis Arbonne.</p>
                    </div>
                    
                    <div>
                        <label for="terrain" class="block mb-1 font-medium text-sm">Type de terrain</label>
                        <select id="terrain" class="w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-basque-green dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                            <option value="friche">Friche/Forêt (Valeur fourragère basse)</option>
                            <option value="normal" selected>Pelouse/Jardin (Valeur fourragère moyenne)</option>
                            <option value="prairie">Prairie (Valeur fourragère élevée)</option>
                        </select>
                    </div>
                    
                    <button id="calculateBtn" class="bg-basque-green hover:bg-basque-green/80 text-white font-medium py-2 px-4 rounded transition duration-300 text-sm">
                        Calculer
                    </button>
                </div>
                
                <div id="calculationResult" class="hidden mt-4 p-4 bg-gray-100 dark:bg-gray-600 rounded-lg text-sm">
                    <div id="loadingDistance" class="mb-2 text-xs flex items-center">
                        <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-basque-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Calcul de la distance en cours...
                    </div>
                    <p class="mb-1">Surface à entretenir: <span id="areaSummary" class="font-medium">0</span> m²</p>
                    <p class="mb-1">Type de terrain: <span id="terrainTypeSummary" class="font-medium">Pelouse/Jardin</span></p>
                    <p class="mb-1">Nombre de brebis recommandé: <span id="sheepCount" class="font-medium">0</span></p>
                    <p class="mb-1">Temps estimé pour une tonte complète: <span id="estimatedDays" class="font-medium">0</span> jours</p>
                    <p class="mb-1">Distance depuis Arbonne: <span id="distanceSummary" class="font-medium">0</span> km</p>
                    <p id="distanceWarning" class="text-xs text-yellow-600 dark:text-yellow-400 mt-1 hidden">Distance non déterminée. Le prix peut varier en fonction de la localisation exacte.</p>
                    <p class="font-bold mt-2 text-base">Estimation du tarif: <span id="totalPrice">0</span> € / semaine</p>
                    <p class="mt-1 text-xs italic">Forfait hebdomadaire incluant livraison, installation et suivi des animaux</p>
                    
                    <!-- Impact écologique -->
                    <div id="eco-impact" class="mt-4 p-3 bg-basque-green/10 rounded-lg text-sm hidden">
                        <h4 class="font-semibold mb-2">Impact écologique estimé :</h4>
                        <div class="space-y-1">
                            <p class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-basque-green mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Économie de ~<span id="co2Savings">0</span> kg de CO2 vs. tonte mécanique</span>
                            </p>
                            <p class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-basque-green mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Économie de ~<span id="waterSavings">0</span> litres d'eau</span>
                            </p>
                            <p class="flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-basque-green mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Favorise la biodiversité locale</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Bouton de réservation après calcul -->
                <div id="booking-btn-container" class="mt-4 hidden">
                    <a href="#calendar-section" class="block text-center bg-basque-green hover:bg-basque-green/80 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                        Réserver pour une semaine
                    </a>
                </div>
            </div>
            
            <!-- Section calendrier pour réservation -->
            <div id="calendar-section" class="mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-4 text-center">Réserver des brebis à la semaine</h3>
                <p class="mb-6 text-center">Sélectionnez une date de début pour votre location hebdomadaire. Le formulaire est à remplir directement dans le calendrier.</p>
                
                <div class="cal-iframe-container" style="height: 1200px; min-height: 1200px;">
                    <div id="loading-calendar" class="iframe-loading">
                        <div class="loading-spinner mb-4"></div>
                        <p>Chargement du calendrier...</p>
                    </div>
                    <iframe 
                        id="cal-iframe-ecopaturage"
                        src="https://cal.com/artzainak/sheep-week?embed=true&theme=dark&lang=fr&hideEventTypeDetails=false&embedType=responsive" 
                        width="100%" 
                        height="100%" 
                        style="min-height: 1200px;"
                        frameborder="0"
                        allow="camera; microphone; autoplay; fullscreen"
                        onload="hideLoading('loading-calendar')">
                    </iframe>
                </div>
                <p class="mt-4 text-sm text-center text-gray-500 dark:text-gray-400">Vous serez contacté après votre réservation pour confirmer les détails et organiser l'installation des brebis.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="py-6 px-4 bg-gray-800 text-white">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold">ARTZAINAK</h2>
                    <p class="text-sm">Éducation de chiens de troupeau au Pays Basque</p>
                </div>
                
                <div class="text-sm text-center md:text-right">
                    <div class="flex gap-4 justify-center md:justify-end mb-2">
                        <a href="reservation.html" class="text-white hover:text-primary transition duration-300">Réserver un cours</a>
                        <a href="location.html" class="text-white hover:text-basque-green transition duration-300">Louer des brebis</a>
                        <a href="ressources.html" class="text-white hover:text-primary transition duration-300">Ressources</a>
                        <a href="contact.html" class="text-white hover:text-gray-300 transition duration-300">Contact</a>
                    </div>
                    <p>&copy; 2023 Artzainak. Tous droits réservés.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Script Cal.com -->
    <script src="https://app.cal.com/embed/embed.js"></script>
    
    <!-- Scripts personnalisés -->
    <script src="js/script.js"></script>
    <script src="js/mobile-optimizations.js"></script>
    <script src="js/performance-optimizations.js"></script>
    <script src="js/floating-cta.js"></script>
    
    <script>
    // Calculateur d'écopâturage simplifié
    document.addEventListener('DOMContentLoaded', function() {
        // Fonction pour calculer la distance
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Rayon de la Terre en km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            const distance = R * c; // Distance en km
            return Math.round(distance);
        }

        // Fonction pour calculer l'écopâturage
        function calculateEcoPasture() {
            // Récupération des valeurs du formulaire
            const landSize = parseFloat(document.getElementById('landSize').value);
            const terrain = document.getElementById('terrain').value;
            const address = document.getElementById('address').value;
            
            // Validation de la taille du terrain
            if (landSize < 1000) {
                document.getElementById('sizeError').classList.remove('hidden');
                return;
            } else {
                document.getElementById('sizeError').classList.add('hidden');
            }
            
            // Affichage des résultats initiaux
            document.getElementById('calculationResult').classList.remove('hidden');
            document.getElementById('loadingDistance').classList.remove('hidden');
            document.getElementById('areaSummary').textContent = landSize.toLocaleString('fr-FR');
            
            // Calcul du nombre de brebis en fonction du type de terrain
            let sheepPerHectare;
            let terrainTypeName;
            let terrainEfficiency;
            
            switch(terrain) {
                case 'prairie':
                    sheepPerHectare = 15;
                    terrainTypeName = "Prairie (valeur fourragère élevée)";
                    terrainEfficiency = 1.2;
                    break;
                case 'friche':
                    sheepPerHectare = 5;
                    terrainTypeName = "Friche/Forêt (valeur fourragère basse)";
                    terrainEfficiency = 0.6;
                    break;
                default: // normal (pelouse/jardin)
                    sheepPerHectare = 10;
                    terrainTypeName = "Pelouse/Jardin (valeur fourragère moyenne)";
                    terrainEfficiency = 1.0;
            }
            
            document.getElementById('terrainTypeSummary').textContent = terrainTypeName;
            
            // Calcul du nombre de brebis (conversion m² en hectares)
            const hectares = landSize / 10000;
            const sheepCount = Math.max(5, Math.round(hectares * sheepPerHectare));
            document.getElementById('sheepCount').textContent = sheepCount;
            
            // Estimation du temps nécessaire pour une tonte complète
            const estimatedDays = Math.ceil((landSize / 100) / (sheepCount * terrainEfficiency));
            document.getElementById('estimatedDays').textContent = estimatedDays;
            
            // Géocodage et calcul de distance
            if (address) {
                // Simuler un géocodage (remplacer par une API réelle)
                setTimeout(() => {
                    const distance = Math.floor(Math.random() * 30) + 5; // Distance simulée entre 5 et 35 km
                    document.getElementById('distanceSummary').textContent = distance;
                    
                    // Calcul du prix basé sur nombre de brebis et distance
                    const basePricePerSheep = 15; // Prix de base par brebis par semaine
                    const distanceFee = Math.max(0, (distance - 20) * 2); // Frais de distance au-delà de 20km
                    
                    // Calcul du prix hebdomadaire
                    const weeklyPrice = (sheepCount * basePricePerSheep) + distanceFee;
                    
                    // Affichage du prix
                    document.getElementById('totalPrice').textContent = `${weeklyPrice.toLocaleString('fr-FR')}`;
                    
                    // Calculer impact écologique
                    document.getElementById('eco-impact').classList.remove('hidden');
                    
                    // Calculer les économies CO2 approximatives par rapport à une tondeuse
                    const co2SavingsPerHectare = 25; // kg de CO2 économisés par hectare
                    const co2Savings = Math.round(hectares * co2SavingsPerHectare);
                    document.getElementById('co2Savings').textContent = co2Savings;
                    
                    // Calculer économie d'eau
                    const waterSavingsPerHectare = 2000; // litres d'eau économisés par hectare
                    const waterSavings = Math.round(hectares * waterSavingsPerHectare);
                    document.getElementById('waterSavings').textContent = waterSavings;
                    
                    // Afficher bouton de réservation
                    document.getElementById('booking-btn-container').classList.remove('hidden');
                    
                    document.getElementById('loadingDistance').classList.add('hidden');
                }, 1500);
            } else {
                // Gestion sans adresse
                document.getElementById('distanceSummary').textContent = "Non déterminée";
                document.getElementById('distanceWarning').classList.remove('hidden');
                
                // Prix approximatif sans distance
                const approximatePrice = sheepCount * 15;
                document.getElementById('totalPrice').textContent = `~${approximatePrice.toLocaleString('fr-FR')} (estimation)`;
                
                // Afficher bouton de réservation quand même
                document.getElementById('booking-btn-container').classList.remove('hidden');
                
                document.getElementById('loadingDistance').classList.add('hidden');
            }
        }

        // Attacher l'événement au bouton
        const calculateBtn = document.getElementById('calculateBtn');
        if (calculateBtn) {
            calculateBtn.addEventListener('click', calculateEcoPasture);
        }
        
        // Masquer le loader du calendrier
        window.hideLoading = function(loaderId) {
            const loader = document.getElementById(loaderId);
            if (loader) {
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 300);
            }
        };
        
        // Initialiser Cal.com avec le bon thème
        if (typeof Cal !== 'undefined') {
            Cal('ui', {
                theme: 'dark',
                styles: {
                    branding: {
                        brandColor: '#198754'
                    }
                },
                hideEventTypeDetails: false,
                layout: 'month_view'
            });
        }
        
        // Gestion du menu mobile
        const menuToggle = document.getElementById('menuToggle');
        const mobileNav = document.getElementById('mobileNav');
        
        if (menuToggle && mobileNav) {
            menuToggle.addEventListener('click', function() {
                // Toggle du menu
                mobileNav.classList.toggle('hidden');
                
                // Mettre à jour l'état aria-expanded
                const isExpanded = !mobileNav.classList.contains('hidden');
                menuToggle.setAttribute('aria-expanded', isExpanded ? 'true' : 'false');
            });
        }
    });
    </script>
</body>
</html>
